# Flame + Forge2D Callbacks ‚Äî –ø–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫

–≠—Ç–æ—Ç —Ñ–∞–π–ª ‚Äî –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞ –ø–æ **–≤—Å–µ–º –æ—Å–Ω–æ–≤–Ω—ã–º callbacks / mixins**,
–∫–æ—Ç–æ—Ä—ã–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≤ **Flame** –∏ **Flame Forge2D**.

---

## üß± 1. Forge2D ‚Äî –§–ò–ó–ò–ö–ê

### BodyComponent
–ë–∞–∑–æ–≤—ã–π –∫–ª–∞—Å—Å –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–∑–∏—á–µ—Å–∫–∏—Ö –æ–±—ä–µ–∫—Ç–æ–≤.

–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:
- —Å–æ–∑–¥–∞—ë—Ç `Body` –≤ —Ñ–∏–∑–∏—á–µ—Å–∫–æ–º –º–∏—Ä–µ
- —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç –ø–æ–∑–∏—Ü–∏—é –∏ —É–≥–æ–ª —Å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–º
- –¥–∞—ë—Ç –¥–æ—Å—Ç—É–ø –∫ `world`

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤—Å–µ–≥–¥–∞, –µ—Å–ª–∏ –æ–±—ä–µ–∫—Ç —É—á–∞—Å—Ç–≤—É–µ—Ç –≤ —Ñ–∏–∑–∏–∫–µ.

---

### ContactCallbacks
–†–µ–∞–∫—Ü–∏—è –Ω–∞ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è —Ç–µ–ª.

```dart
with ContactCallbacks
```

–ú–µ—Ç–æ–¥—ã:
```dart
beginContact(Object other, Contact contact)
endContact(Object other, Contact contact)
```

–ö–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è:
- –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∫–∞—Å–∞–Ω–∏–∏ —Ç–µ–ª
- –ø—Ä–∏ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –∫–∞—Å–∞–Ω–∏—è

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
- —à–∞—Ä —É–¥–∞—Ä–∏–ª—Å—è –æ peg
- –ø–µ—Ä—Å–æ–Ω–∞–∂ –≤—Å—Ç–∞–ª –Ω–∞ –∑–µ–º–ª—é
- –±–æ–Ω—É—Å –ø–æ–¥–æ–±—Ä–∞–Ω

---

### PreSolveCallbacks
–í—ã–∑—ã–≤–∞–µ—Ç—Å—è **–¥–æ** –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è —Ñ–∏–∑–∏–∫–∏ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è.

```dart
with PreSolveCallbacks
```

–ú–µ—Ç–æ–¥:
```dart
preSolve(Object other, Contact contact, Manifold oldManifold)
```

–î–ª—è —á–µ–≥–æ:
- –≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ
- —Å–¥–µ–ª–∞—Ç—å ¬´–ø—Ä–∏–∑—Ä–∞—á–Ω—ã–µ¬ª –æ–±—ä–µ–∫—Ç—ã
- conditional collisions

–ü—Ä–∏–º–µ—Ä:
```dart
contact.isEnabled = false;
```

---

### PostSolveCallbacks
–í—ã–∑—ã–≤–∞–µ—Ç—Å—è **–ø–æ—Å–ª–µ** —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è.

```dart
with PostSolveCallbacks
```

–ú–µ—Ç–æ–¥:
```dart
postSolve(Object other, Contact contact, ContactImpulse impulse)
```

–î–ª—è —á–µ–≥–æ:
- —É–∑–Ω–∞—Ç—å —Å–∏–ª—É —É–¥–∞—Ä–∞
- —ç—Ñ—Ñ–µ–∫—Ç—ã, –∑–≤—É–∫, –æ—á–∫–∏
- —Ä–µ–∞–∫—Ü–∏—è –Ω–∞ –º–æ—â–Ω—ã–µ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏—è

---

## üéÆ 2. Flame ‚Äî –°–¶–ï–ù–ê –ò –ñ–ò–ó–ù–ï–ù–ù–´–ô –¶–ò–ö–õ

### Component lifecycle

–ú–µ—Ç–æ–¥—ã:
```dart
onLoad()
onMount()
update(double dt)
render(Canvas canvas)
onRemove()
```

–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ:
- –∑–∞–≥—Ä—É–∑–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤
- –ª–æ–≥–∏–∫–∞ –∫–∞–¥—Ä–∞
- –æ—á–∏—Å—Ç–∫–∞

---

### HasGameRef<T>
–î–æ—Å—Ç—É–ø –∫ –∏–≥—Ä–µ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞.

```dart
with HasGameRef<MyGame>
```

–ü–æ–∑–≤–æ–ª—è–µ—Ç:
- –æ–±—Ä–∞—â–∞—Ç—å—Å—è –∫ `gameRef.camera`
- –¥–æ–±–∞–≤–ª—è—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- –ø–æ–ª—É—á–∞—Ç—å —Ä–µ—Å—É—Ä—Å—ã

---

### TimerComponent
–¢–∞–π–º–µ—Ä –≤–Ω—É—Ç—Ä–∏ Flame.

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
- –∑–∞–¥–µ—Ä–∂–∫–∏
- cooldown
- –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —ç—Ñ—Ñ–µ–∫—Ç—ã

---

## üñ±Ô∏è 3. –í–í–û–î (INPUT)

### TapCallbacks
–†–µ–∞–∫—Ü–∏—è –Ω–∞ –Ω–∞–∂–∞—Ç–∏—è.

```dart
with TapCallbacks
```

–ú–µ—Ç–æ–¥—ã:
```dart
onTapDown()
onTapUp()
onTapCancel()
```

---

### DragCallbacks
–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ.

```dart
with DragCallbacks
```

–ú–µ—Ç–æ–¥—ã:
```dart
onDragStart()
onDragUpdate()
onDragEnd()
```

---

### PanCallbacks
–°–≤–æ–±–æ–¥–Ω—ã–µ —Å–≤–∞–π–ø—ã (–±–µ–∑ –∑–∞—Ö–≤–∞—Ç–∞).

```dart
with PanCallbacks
```

---

### KeyboardHandler
–ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ (–ü–ö).

```dart
with KeyboardHandler
```

–ú–µ—Ç–æ–¥—ã:
```dart
onKeyEvent()
```

---

## üß† –ö–∞–∫ –≤—ã–±–∏—Ä–∞—Ç—å callback

| –°–æ–±—ã—Ç–∏–µ | –ß—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å |
|------|-----------------|
| –°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ | ContactCallbacks |
| –°–∏–ª–∞ —É–¥–∞—Ä–∞ | PostSolveCallbacks |
| –û—Ç–∫–ª—é—á–∏—Ç—å –∫–æ–Ω—Ç–∞–∫—Ç | PreSolveCallbacks |
| –¢–∞–ø | TapCallbacks |
| –°–≤–∞–π–ø | DragCallbacks |
| –î–æ—Å—Ç—É–ø –∫ –∏–≥—Ä–µ | HasGameRef |
| –§–∏–∑–∏–∫–∞ | BodyComponent |

---

## ‚úÖ –ì–ª–∞–≤–Ω–æ–µ –ø—Ä–∞–≤–∏–ª–æ

**–§–∏–∑–∏–∫–∞ ‚Üí Forge2D callbacks**  
**–í–≤–æ–¥ ‚Üí Flame input callbacks**  
**–í–∏–∑—É–∞–ª ‚Üí Components**

–ù–∏–∫–∞–∫–æ–π –º–∞–≥–∏–∏ ‚Äî —Ç–æ–ª—å–∫–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞.
